---
layout: post
title: node入门
date: 2021-9-5
categories: 前端
tags: [前端开发, nodejs,npm]
---

## npm

```
npm install(i) -g package@
npm install --save(-S)
npm install --save -dev(-D)
npm install --save -exact(-E)
npm uninstall -g package@ --save -dev
npm update -g package@
npm list(ls) -g
npm cache clean --force(f)
npm config ls
npm config ls -l
npm config set prefix "url"
npm config set cache  "url"
npm version(v)
npm help
```

## node 模块

#### http模块
```
//模块引入
const http = require('http');
const fs = require('fs');

//定义端口号，地址
const hostname = '127.0.0.1';
const port = 8000;
//创建web服务器 ,回调函数req代表客户端请求 res服务端响应     http.createClient创建客户端
const server = http.createServer((req, res) => {
  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  if(req.url !== '/favicon.ico'){
      let out = fs.createWriteStream('./log.txt') // 创建写入流
      out.write(`请求方法：${req.method} \n`)
      out.write(`请求url：${req.url} \n`)
      out.write(`请求头对象：${JSON.stringify(req.headers, null, 4)} \n`)
      out.write(`请求http版本：${req.httpVersion} \n`)
  }
  res.end('Hello World');
});

//启动服务器，监听端口
server.listen(port, hostname, () => {
  console.log(`Server running at http://${hostname}:${port}/`);
});

//设置服务器超时
server.timeout=1000

//关闭服务器
server.close([callback])
```

#### fs模块

所有操作分为同步和异步方法
```
const fs = require('fs')
//同步
let fd = fs.openSync('test.txt','w')
fs.writeSync(fd,'test:hello world')
fs.closeSync(fd)

//异步
fs.open('test.txt','w',function(err, fd){
  if(err){
    console.log(err)
  }else{
    console.log(fd)

    fs.write(fd,'test:hello world',function(err){
      if(!err) console.log('文件已关闭')
      fs.close(fd,function(err){
          if(!err){
            console.log('文件已关闭')
        }
      })
    })
  }
})
//简化写入文件
fs.writeFlie('test.txt','写入的内容',function(err){
  if(!err)  console.log('写入成功')
})
//流式文件写入
let writeFile = fs.createWriteStream('toPath.txt')
writeFile.on[once]('open',function(){
  console.log('流打开了')
})
writeFile.write('写入文件')
writeFile.write('写入文件')
writeFile.write('写入文件')
writeFile.close()
//简化读取文件
fs.readFile('test.txt',function(err, data){
  if(!err){
    console.log('写入成功：', data)
    fs.writeFlie('test1.txt',data,function(err){
    if(!err)  console.log('写入成功')
})
}
})
//流式文件读取
let readFile = fs.createReadStream('toPath.txt')

readFile.on[once]('open',function(data){
  console.log('流打开了')
})
readFile.on[once]('data',function(data){
  console.log(data)
})

//可读流数据存入可写流
readFile.pipe(writeFile)


//其他操作
fs.unlink() 删除文件
fs.stat() 获取文件信息
fs.exists() 验证路径是否存在
```

#### 其他模块
```
net模块

os模块

events模块

path模块
```

## buffer(缓存区)

```
弥补js数组，存储二进制数据,16进制表示，一个buffer占用内存一个byte
存储数据超出8位，取最后8位数据
let buf = new Buffer(1024)   Buffer.alloc(1024)
allocUnsafe()分配时未作初始化
```