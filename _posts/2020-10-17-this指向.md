---
layout: post
title: this指向
date: 2020-10-17
categories: 前端
tags: [前端开发,this指向,JavaScript]
---
## this关键词概述

&emsp;&emsp;this的指向在函数定义的时候是确定不了的，只有函数执行的时候才能确定this到底指向谁，简单来说this指向的是那个调用它的对象。
&emsp;&emsp;具体的来说this的使用分为一下四种情况：
1. 有对象就指向调用对象
2. 没调用对象就指向全局对象
3. 用new构造就指向新对象
4. 通过 apply 或 call 或 bind 改变 this 指向
&emsp;&emsp;接下来我们逐个分析，各个使用情景。

## 1.有对象调用

```
var person = {
  firstName: "John",
  lastName : "Doe",
  id     : 646,
  fullName : function() {
    return this.firstName + " " + this.lastName;
  }
  console.log(fullname);//=>
John Doe};
```
fullname属于person对象，所以直接指向person

## 2.没有对象调用

```
var myObject = {value: 100};
myObject.getValue = function () {
  var foo = function () {
    console.log(this.value) // => undefined
    console.log(this);// 输出全局对象 global
  };

  foo();

  return this.value;
};
console.log(myObject.getValue()); // => 100
```
foo 函数虽然定义在 getValue 的函数体内，但它既不属于 getValue 也不属于 myObject。foo 并没有被绑定在任何对象上，所以当调用时，它的 this 指针指向了全局对象window

## 3.函数对象赋给新对象

```
var SomeClass = function(){
  this.value = 100;
}
var myCreate = new SomeClass();
console.log(myCreate.value); // 输出100
```
我们通过 new 关键词来调用 SomeClass(没有new效果也一样，因为js里函数就是对象) ，此时 this 会绑定在对象 myCreate 

## 4.使用bind、apply、call

```
var person1 = {
  fullName: function() {
    return this.firstName + " " + this.lastName;
  }
}
var person2 = {
  firstName:"John",
  lastName: "Doe",
}
person1.fullName.call(person2);  // 返回 "John Doe"
```
fullname本来指向person1,但是call(apply、bind)将this绑定到了person2上
